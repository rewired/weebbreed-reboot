• Critical: config.update setpoint rejects UUID zoneIds (backend socketGateway.ts) — zoneIdSchema enforces /^zone[-\_][a-z0-9]+$/i; this breaks UUID v4 IDs per spec; fix by accepting UUID or any non-empty string (align with facade.findZone), and update docs. Files: src/backend/src/server/socketGateway.ts, docs/system/ui-mplementation-spec.md, docs/system/socket_protocol.md
Status: ✅ Completed 2025-09-24 — Relaxed the socket gateway zoneId validation to trimmed strings (UUID-friendly) and aligned the socket/UI docs.
• Critical: Unsupported frontend intent world.updateStructure (frontend zoneStore) — backend facade has renameStructure (no updateStructure handler); calls will return ERR_VALIDATION; fix store to use world.renameStructure with { structureId, name }. Files: src/frontend/src/store/zoneStore.ts, src/backend/src/facade/index.ts, docs/system/facade.md
Status: ✅ Completed 2025-09-24 — Zone store now issues `world.renameStructure` with the expected payload and the facade docs call out the object signature.
• High: Device-kind mismatch for humidity control (facade vs environment) — facade HUMIDITY_DEVICE_KINDS = ['HumidityControlUnit'] but environment service also recognizes 'Dehumidifier'; setpoint routing will wrongly return ERR_INVALID_STATE when only dehumidifiers are present; align sets and docs. Files: src/backend/src/facade/index.ts, src/backend/src/engine/environment/zoneEnvironment.ts, ADR 0004
• High: Dead alias '@/engine' (frontend Vite) — maps to ../engine which does not exist; remove or point to shared runtime/backend as intended to avoid broken imports and path confusion. Files: src/frontend/vite.config.ts, tsconfig.base.json (verify mirror), docs
Status: ✅ Completed 2025-09-24 — Removed the unused '@/engine' alias from the frontend Vite and TypeScript configs and updated documentation to reflect the cleanup.
• Medium: Modal pause/resume policy not implemented (frontend) — spec requires auto-pause on open and restore prior state on close, but modalSlice only stores flags; implement wiring (read time status, pause on open if running, resume on close if wasRunningBeforeModal). Files: docs/system/ui-mplementation-spec.md §4, src/frontend/src/store/slices/modalSlice.ts, useSimulationBridge + stores
Status: ✅ Completed 2025-09-24 — Modal store now pauses via `openModal` (autoPause by default) and issues a resume on close when the sim was running beforehand, with docs updated.
• Medium: Frontend maintenance type drift — backend snapshot includes maintenance.runtimeHoursAtLastService but frontend DeviceMaintenanceSnapshot omits it; add optional field to keep parity; adjust UI use later if needed. Files:
src/backend/src/lib/uiSnapshot.ts, src/frontend/src/types/simulation.ts
Status: ✅ Completed 2025-09-24 — Exported the backend maintenance snapshot alias and added the optional runtimeHoursAtLastService field to the frontend types to keep parity.
• Medium: Superfluous field in simulationControl payload — useSimulationBridge sends { type: 'simulationControl', ... } though server validates on 'action'; benign but noisy; remove the extra field for clarity (optional). Files: src/frontend/src/hooks/useSimulationBridge.ts, docs/system/socket_protocol.md
Status: ✅ Completed 2025-09-24 — useSimulationBridge now emits bare simulationControl commands and the socket protocol doc clarifies that clients should omit the redundant wrapper.
• Medium: Naming clarity for normalized recurring costs — costAccounting treats structure.rentPerTick as per-hour rate multiplied by tickLengthHours (now normalized), but the name is misleading; either rename to rentPerHour or document the convention consistently. Files: src/backend/src/engine/economy/costAccounting.ts, docs/system/simulation-engine.md §Economics, price/data docs
Status: ✅ Completed 2025-09-24 — Documented the hourly-rate convention across engine/state docs, clarified the socket snapshot note, and added inline helpers so `rentPerTick` reads as a legacy alias for rent-per-hour.
• Medium: Device schema strictness vs usage — deviceSchema.settings is .passthrough; engine expects fields like targetTemperature/targetHumidity/targetCO2; consider tightening/annotating schemas (docs+zod) to catch typos (e.g., “targetCo2” vs “targetCO2”). Files: src/backend/src/data/schemas/deviceSchema.ts, docs/addendum/data-validation.md
Status: ✅ Completed 2025-09-24 — Added a canonical-case guard for device setpoint keys in the schema and documented the validation behavior.
• Low: Optional telemetry not surfaced yet in UI — dashboard reads zone.lighting/plantingPlan but backend snapshot lacks these aggregates; either add derived fields (backend) or guard UI (already guarded) and open an enhancement task. Files: src/backend/src/lib/uiSnapshot.ts, src/frontend/src/views/DashboardOverview.tsx, docs/system/ui-mplementation-spec.md
• Low: Path coupling in runtime imports — runtime/eventBus imports backend src modules directly; acceptable in monorepo but brittle for packaging; consider extracting a small shared package for EventBus contracts. Files: src/runtime/eventBus.ts, src/backend/src/lib/eventBus.ts, ADR 0002/0003
