# Enhanced Cultivation Methods Summary\n\nAll cultivation methods have been successfully aligned with the new enhanced schema including environmental bias, labor profiles, and capacity hints.\n\n## Enhanced Fields Added to All Methods\n\n### ✅ Environmental Bias (`envBias`)\nPreferred environmental offsets that the cultivation method naturally creates:\n- **Temperature bias** (`temp_C`): Method's tendency to raise/lower temperature\n- **Humidity bias** (`rh_frac`): Method's effect on humidity levels\n- **CO2 bias** (`co2_ppm`): Method's CO2 consumption or retention characteristics\n- **Light bias** (`ppfd_umol_m2s`): Method's light distribution effects\n- **VPD bias** (`vpd_kPa`): Method's impact on vapor pressure deficit\n\n### ✅ Labor Profile (`laborProfile`)\nWork requirements for successful cultivation:\n- **Hours per plant per week** (`hoursPerPlantPerWeek`): Labor intensity measurement\n\n### ✅ Capacity Hints (`capacityHints`)\nSpace utilization characteristics:\n- **Plants per m²** (`plantsPer_m2`): Optimal plant density\n- **Canopy height** (`canopyHeight_m`): Typical final plant height\n\n## Method-Specific Characteristics\n\n### Basic Soil Pot\n- **Environmental Bias**: Neutral (no specific biases)\n- **Labor Profile**: 0.2 hours/plant/week (very low maintenance)\n- **Capacity**: 4 plants/m², 1.2m canopy height\n- **Philosophy**: Simple, beginner-friendly, universally compatible\n\n### Sea of Green (SOG)\n- **Environmental Bias**: \n - `vpd_kPa: +0.1` (higher VPD for dense canopy air circulation)\n - `rh_frac: -0.05` (slightly lower humidity to prevent mold)\n- **Labor Profile**: 0.3 hours/plant/week (moderate plant management)\n- **Capacity**: 18 plants/m², 0.6m canopy height\n- **Philosophy**: High-density, fast-cycling, indica-optimized\n\n### Screen of Green (SCROG)\n- **Environmental Bias**:\n - `temp_C: +0.5` (slightly warmer for enhanced growth)\n - `co2_ppm: +50` (better CO2 utilization with trained canopy)\n- **Labor Profile**: 1.2 hours/plant/week (high training effort)\n- **Capacity**: 2 plants/m², 0.8m canopy height\n- **Philosophy**: Low-density, maximum yield per plant, sativa-optimized\n\n## Compatibility System\n\n### Method vs Strain Compatibility Calculation\nThe new `MethodCompatibilityService` evaluates:\n\n1. **Environmental Fit (60% weight)**\n - Compares method `envBias` against strain environmental bands\n - Calculates if method biases align with strain preferences\n - Accounts for growth phase differences\n\n2. **Labor Fit (25% weight)**\n - Matches method labor requirements with strain resilience\n - Considers existing strain method affinity scores\n - Evaluates strain tolerance for labor-intensive techniques\n\n3. **Capacity Fit (15% weight)**\n - Compares method density with strain genetic preferences\n - Indica strains favor higher density (SOG-style)\n - Sativa strains prefer lower density (SCROG-style)\n\n### Compatibility Categories\n- **Excellent** (0.85+): Method is ideal for this strain\n- **Good** (0.7-0.84): Method performs well with this strain\n- **Acceptable** (0.5-0.69): Method works but may not be optimal\n- **Poor** (0.3-0.49): Method may struggle with this strain\n- **Incompatible** (<0.3): Method not recommended for this strain\n\n## Integration Benefits\n\n### For Players\n- **Smart recommendations**: System suggests optimal method-strain combinations\n- **Environmental insights**: Understand how methods affect growing conditions\n- **Labor planning**: Accurate time estimates for cultivation management\n- **Space optimization**: Realistic density and height planning\n\n### For Simulation\n- **Realistic constraints**: Method biases affect environmental control\n- **Dynamic compatibility**: Scores adapt based on strain and growth phase\n- **Resource planning**: Labor and space requirements drive economic decisions\n- **Educational value**: Learn real cultivation trade-offs and techniques\n\n## Technical Implementation\n\n### Schema Validation\n`typescript\n// Enhanced cultivation method schema with new fields\nenvBias: z.object({\n  temp_C: z.number().optional(),\n  rh_frac: z.number().optional(),\n  co2_ppm: z.number().optional(),\n  ppfd_umol_m2s: z.number().optional(),\n  vpd_kPa: z.number().optional(),\n}).optional(),\n\nlaborProfile: z.object({\n  hoursPerPlantPerWeek: z.number().positive(),\n}).optional(),\n\ncapacityHints: z.object({\n  plantsPer_m2: z.number().positive(),\n  canopyHeight_m: z.number().positive(),\n}).optional()\n`\n\n### Compatibility Service\n- **Weighted scoring**: Environmental fit is most important (60%)\n- **Phase-aware**: Evaluations consider current plant growth stage\n- **Extensible**: Easy to add new compatibility factors\n- **Recommendation engine**: Provides actionable cultivation advice\n\n## Example Usage\n\n`typescript\n// Calculate strain-method compatibility\nconst compatibility = methodCompatibilityService.calculateCompatibility({\n  strain: ak47Strain,\n  method: sogMethod,\n  stage: 'flowering'\n});\n\nconsole.log(compatibility.category); // 'excellent'\nconsole.log(compatibility.overallScore); // 0.87\nconsole.log(compatibility.details.environmental); // Detailed breakdown\n`\n\n## Files Updated\n\n1. **Basic Soil Pot** (`data/blueprints/cultivationMethods/basic_soil_pot.json`)\n - Added neutral environmental bias (no offsets)\n - Low labor requirements (0.2 hours/plant/week)\n - Moderate density (4 plants/m², 1.2m height)\n\n2. **Sea of Green** (`data/blueprints/cultivationMethods/sog.json`)\n - Added VPD and humidity bias for dense canopy management\n - Moderate labor (0.3 hours/plant/week)\n - High density (18 plants/m², 0.6m height)\n\n3. **Screen of Green** (`data/blueprints/cultivationMethods/scrog.json`)\n - Added temperature and CO2 bias for optimal training\n - High labor (1.2 hours/plant/week for screen management)\n - Low density (2 plants/m², 0.8m height)\n\n4. **Schema Validation** (`src/backend/src/data/schemas/cultivationMethodSchema.ts`)\n - Added Zod validation for all new fields\n - Type-safe environmental bias definitions\n - Positive number validation for capacity hints\n\n5. **Compatibility Service** (`src/backend/src/engine/cultivation/methodCompatibilityService.ts`)\n - Comprehensive strain-method compatibility analysis\n - Weighted scoring system with detailed breakdowns\n - Recommendation engine for cultivation decisions\n\nAll cultivation methods are now fully enhanced and ready for advanced strain-method compatibility analysis in the simulation engine!
